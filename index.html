<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CityBlocks.com</title>
<style>
  :root{ --bg:#000; --fg:#fff; --cta:#ffcc00; }
  html,body{height:100%;margin:0}
  body{background:var(--bg); color:var(--fg); font-family: "Helvetica Neue", Arial, sans-serif; overflow:hidden;}

  /* ---------- INTRO (one word at a time) ---------- */
  #intro{ position:fixed; inset:0; background:var(--bg); z-index:10;
          display:flex; flex-direction:column; align-items:center; justify-content:center; }
  #words{ position:relative; width:100%; height:20vh; }
  .w{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    opacity:0; font-weight:300; letter-spacing:.04em;
    text-shadow:0 8px 24px rgba(0,0,0,.55);
    animation:wordCycle 1.2s ease forwards;
  }
  /* Slimmer + responsive sizing */
  @media (min-width:900px){ .w{ font-size: clamp(36px, 7.2vw, 96px); } }
  @media (max-width:899px){ .w{ font-size: clamp(28px, 10vw, 56px); } }

  /* Each gets its own delay so only one shows at a time */
  .w.w1{ animation-delay: .2s; }
  .w.w2{ animation-delay: 1.6s; }
  .w.w3{ animation-delay: 3.0s; }
  .w.w4{ animation-delay: 4.4s; }
  .w.w5{ animation-delay: 5.6s; }          /* AT (snappier next beat) */

  @keyframes wordCycle{
    0%{ opacity:0; transform:translateY(8px) scale(.98) }
    20%{ opacity:1; transform:translateY(0) scale(1) }
    80%{ opacity:1; transform:translateY(0) scale(1) }
    100%{ opacity:0; transform:translateY(-6px) scale(.99) }
  }

  /* Final beat: domain + logo together */
  #final{
    display:flex; flex-direction:column; align-items:center; gap:.5rem;
    opacity:0; transform:translateY(10px) scale(.98);
    animation:finalBeat 1.2s ease forwards 6.6s; /* starts after 'AT' */
  }
  #final .domain{
    font-weight:700; letter-spacing:.06em;
  }
  @media (min-width:900px){ #final .domain{ font-size: clamp(28px, 5.5vw, 72px); } }
  @media (max-width:899px){ #final .domain{ font-size: clamp(22px, 8vw, 40px); } }

  #final img{
    width:min(42vw, 420px); max-width:82vw; height:auto;
    filter: drop-shadow(0 8px 28px rgba(0,0,0,.6));
  }

  @keyframes finalBeat{
    0%{opacity:0; transform:translateY(10px) scale(.98)}
    60%{opacity:1; transform:translateY(0) scale(1.02)}
    100%{opacity:1; transform:translateY(0) scale(1)}
  }

  /* Fade the whole intro away, reveal main */
  .intro-out{ animation:introOut .8s ease forwards; }
  @keyframes introOut{ to{ opacity:0; visibility:hidden } }

  /* ---------- SQUARE 2Ã—2 GRID (centered) ---------- */
  #stage{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; }
  .grid{
    width: 100vmin; height: 100vmin;       /* perfect square */
    display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr;
    opacity:0; transition:opacity .9s ease;
  }
  .tile{ position:relative; overflow:hidden; background:#111; }
  .tile img, .tile video{
    position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;
    transition:opacity .25s ease, transform .45s ease;
  }
  .tile img{ opacity:1; }
  .tile video{ opacity:0; }
  .tile:hover img{ opacity:0; }
  .tile:hover video{ opacity:1; transform:scale(1.06); }

  .label{
    position:absolute; left:12px; bottom:12px; padding:.45rem .7rem;
    background:rgba(0,0,0,.55); border-radius:8px; font-weight:700; font-size:14px;
    opacity:0; transition:opacity .25s ease;
  }
  .tile:hover .label{ opacity:1; }

  /* CTA */
  #inquire{ position:fixed; right:18px; bottom:18px; z-index:2; opacity:0; transition:opacity .9s ease; }
  #inquire button{
    background:var(--cta); color:#111; border:0; padding:.7rem 1rem; border-radius:10px;
    font-weight:800; font-size:clamp(14px,1.6vw,16px); cursor:pointer;
    box-shadow:0 8px 24px rgba(0,0,0,.35);
  }
  #inquire button:hover{ filter:brightness(1.06); }

  /* Tall screens (phones) keep it square using width instead of height if needed */
  @media (max-aspect-ratio: 3/4){
    .grid{ width:100vw; height:100vw; }
  }
</style>
</head>
<body>

<!-- INTRO -->
<section id="intro" aria-hidden="false">
  <div id="words">
    <div class="w w1">BUILD</div>
    <div class="w w2">YOUR</div>
    <div class="w w3">NEXT</div>
    <div class="w w4">WORLD</div>
    <div class="w w5">AT</div>
  </div>
  <div id="final">
    <div class="domain">CITYBLOCKS.COM</div>
    <img src="CityBlocksLogo01.png" alt="CityBlocks Logo" />
  </div>
</section>

<!-- MAIN -->
<div id="stage">
  <section class="grid" id="grid" aria-hidden="true">
    <figure class="tile" data-target="1940s.html">
      <img src="1940s.png" alt="1940s World">
      <video src="1940s.mp4" muted loop playsinline preload="metadata"></video>
      <figcaption class="label">1940s</figcaption>
    </figure>
    <figure class="tile" data-target="PresentDay.html">
      <img src="PresentDay.png" alt="Present Day">
      <video src="PresentDay.mp4" muted loop playsinline preload="metadata"></video>
      <figcaption class="label">Present Day</figcaption>
    </figure>
    <figure class="tile" data-target="Future.html">
      <img src="Future.png" alt="Future World">
      <video src="Future.mp4" muted loop playsinline preload="metadata"></video>
      <figcaption class="label">Future</figcaption>
    </figure>
    <figure class="tile" data-target="HistoricPast.html">
      <img src="HistoricPast.png" alt="Historic Past">
      <video src="HistoricPast.mp4" muted loop playsinline preload="metadata"></video>
      <figcaption class="label">Historic Past</figcaption>
    </figure>
  </section>
</div>

<!-- CTA -->
<div id="inquire"><button type="button" onclick="openInvestor()">Inquire Now</button></div>

<script>
  // When the final beat finishes, fade intro out and reveal grid + CTA
  const totalIntroMs = 6.6 * 1000 + 1200 + 400; // delays + final anim + small hold
  setTimeout(() => {
    document.getElementById('intro').classList.add('intro-out');
    document.getElementById('grid').style.opacity = 1;
    document.getElementById('inquire').style.opacity = 1;
    document.getElementById('intro').setAttribute('aria-hidden','true');
    document.getElementById('grid').setAttribute('aria-hidden','false');
  }, totalIntroMs);

  // Hover/tap video logic (desktop + iOS)
  const tiles = document.querySelectorAll('.tile');
  function showVideo(tile, show){
    const img = tile.querySelector('img');
    const vid = tile.querySelector('video');
    const label = tile.querySelector('.label');
    if(!vid) return;
    if(show){
      vid.play().catch(()=>{});
      vid.style.opacity = 1; img.style.opacity = 0; label.style.opacity = 1;
      vid.style.transform = 'scale(1.06)';
    }else{
      vid.pause(); vid.currentTime = 0;
      vid.style.opacity = 0; img.style.opacity = 1; label.style.opacity = 0;
      vid.style.transform = 'scale(1)';
    }
  }
  tiles.forEach(tile=>{
    const vid = tile.querySelector('video');
    tile.addEventListener('mouseenter', ()=>showVideo(tile,true));
    tile.addEventListener('mouseleave', ()=>showVideo(tile,false));
    // Mobile: first tap previews, second tap clicks through
    let tapped = false;
    tile.addEventListener('touchstart', (e)=>{
      if(!tapped){
        e.preventDefault();
        showVideo(tile,true);
        tapped = true; setTimeout(()=>tapped=false, 900);
      }else{
        const target = tile.dataset.target; if(target) location.href = target;
      }
    }, {passive:false});
    // Desktop click
    tile.addEventListener('click', ()=>{
      const target = tile.dataset.target; if(target) location.href = target;
    });
    if(vid){ vid.muted = true; vid.playsInline = true; }
  });

  // Inquire: open PDF if present, else email
  function openInvestor(){
    fetch('InvestorOneSheet.pdf', { method:'HEAD' })
      .then(r => { if(r.ok) window.open('InvestorOneSheet.pdf','_blank'); else throw 0; })
      .catch(()=>{ window.location.href='mailto:cityblocks@icloud.com'; });
  }
</script>
</body>
</html>
